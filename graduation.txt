Grigory Kislin [11:21 PM]
joined #graduation.

Grigory Kislin [11:40 PM]
Начиная с 4го занятия можнео приступать к выпускному проекту: https://github.com/JavaWebinar/topjava/blob/doc/doc/graduation.md
Обсуждение здесь. Свои решения НЕ публиковать!
Ревью проекта входит в участие с проверкой домашних заданий (*ревьюится один раз!*).
Отдать на ревью нужно до 09.01.2019 (если идешь на Masterjava, то срок до 31.03.2019).
Успехов! (edited)

Gekov Iliya [11:53 PM]
joined #graduation along with 17 others.


Gekov Iliya [Today at 1:03 AM]
@Grigory Kislin Есть ли возможность оплатить ревью только выпускного проекта?



6 replies
Ilya A. Kvyatkovsky [13 hours ago]
Тоже возник этот вопрос.


Zippospb [6 hours ago]
В прошлом выпуске так точно можно было сделать. Если хотели оплатить лишь ревью проекта, нужно было оплатить из личного кабинета интервью. В этот раз, думаю, будет так же


Grigory Kislin [1 hour ago]
да, есть такое. стоимость как и тестового собеседования - 1950р (edited)


Gekov Iliya [1 hour ago]
@Grigory Kislin Спасибо. А оплачивать через личный кабинет?


Grigory Kislin [1 hour ago]
да, или как тестовое интервью из личного кабинета javaops, либо другим способом: http://javaops.ru/view/payment (при этом отписаться мне) (edited)


Gekov Iliya [1 hour ago]
Понял, спасибо!


Илья Чиликин [1:48 AM]
joined #graduation.

Vitaliy Ivkin [12:19 PM]
Я правильно понимаю, что курсовой проект по сути на всех один и тот же, просто мы делаем его самостоятельно?


Ilya [Today at 12:22 PM]
а как же работа в команде?(


1 reply
Grigory Kislin [1 hour ago]
у работы  в команде, кроме плюсов навыка взаимодействия (что освоить несложно) есть большой минус- кажый делает только свою часть и имеет слабое представление про код остальных. поэтому к работе в команде можно переходить только после того, как освоил все технологии на проекте.


Dima [Today at 7:31 AM]
Так а можно пользоваться благами spring data jpa в связке с spring rest? Или делать все руками?


3 replies
Nikita Ganin [12 hours ago]
Я так понимаю вообще надо всем пользоваться, что изучили, и будем изучать.


Dima [12 hours ago]
Мы пока вручную имплиментировали доступ к базе,хотя со spring data это делается за секунду. И комментах кпроекту написано,что не надо плодить не нужных классов.


Nikita Ganin [9 hours ago]
Ну да, я имел ввиду что нужно использовать последние технологии


Zippospb [1 day ago]
Внимательно читайте пояснения к заданию. Там все написано


Grigory Kislin [17 hours ago]
spring data и spring-rest - будут, см. раписание.
если уже с ним знакомы- можно делать. если нет- лучше подождать занятие


Marat [Yesterday at 8:55 AM]
Начал создавать этот проект в IDEA. Но столкнулся с проблемой - как правильно создать проект? Сделать maven проект, потом добавить в него Web framework ? и потом все зависимости?


13 replies
Marat [1 day ago]
Мы ведь в topjava просто склонировали готовый


Taras [1 day ago]
Создай новый maven проект, добавь сначала зависимости в pom.xml, разреши импорт зависимостей, создай папку webapp там, где у нас, сделай web.xml , подключи в свойствах проекта фреймворки. Проверь на пустом пока проекте, что всё правильно — попробуй сделать package.


Taras [1 day ago]
Да, не забудь переписать их нашего pom кодировку и maven-compiler-plugin.


Marat [1 day ago]
Какого-то автоматического создания нет?


Andrey Tolkachev [1 day ago]
автоматически на Spring-Boot можно
https://start.spring.io/


Marat [1 day ago]
А через архетип maven-archetype-webapp


Marat [1 day ago]
Когда создаешь новый проект maven и потом добавляешь Web Framework, то создается папка Web в корне проекта. А у нас в topjava папка webapp и находится в main. Не пойму в чем разница


Dima [23 hours ago]
Лучше наверно разбираться со спринг бутом,он пользуется большей популярностью сейчас.


Marat [23 hours ago]
Возможно. Но там все упрощенно, все методы для ентити готовы. Думаю может сначала сделать без бута, а потом тоже самое с бутом


Dima [23 hours ago]
Не,ну там основное) методы тебе придется все равно добавлять,хотя тоже просто)


Taras [20 hours ago]
> А у нас в topjava папка webapp и находится в main. Не пойму в чем разница
Есть чётко определённая структура папок, которую требует _maven_: где что лежит, откуда брать ресурсы и куда всё в итоге попадает. Если ты собираешь проект не maven’ом, то и размещаешь где угодно. Для веб-приложений надо, чтоб было `src/main/webapp`, это стандартное размещение. Можно переопределить, но смысла в этом нет..


Taras [20 hours ago]
> А через архетип maven-archetype-webapp
Можно и свой архетип сделать. Но тут проект настолько маленький, что проще стандартно сделать и добавить пару зависимостей, чем разбираться, кто там что написал в стороннем архетипе. (edited)


Grigory Kislin [17 hours ago]
maven-archetype-webapp делает что-то очень древнее.
можно взять то, с чего начали topjava, только без Meal


Marat [7:04 AM]
Как правильно сделать таблицы БД ?
Я планирую так:
Пользователь, Блюдо, Меню, Ресторан и Ланч.
В Ланче сводные уже данные из ресторана и меню. А в меню блюда.


Zhinko [2 days ago]
А как ты будешь определять админ это или нет?


Zhinko [2 days ago]
Я планирую: юзер, роли, еда, ресторан(где будет id админа и Id меню), меню (id ресторана и id еды)


Zhinko [2 days ago]
может у кого-то еще какие-нибудь идеи есть?


Marat [2 days ago]
Как определять админа пока не знаю. А сам как будешь определять?


Marat [2 days ago]
Отдельную таблицу делать что-ли для админа? Но он же юзер на самом деле


Zhinko [2 days ago]
у тебя в топджава есть таблица user_roles, я подозреваю, что если здесь есть юзер и админ, то нужно сделать похожим образом


Nikita Ganin [2 days ago]
А зачем делать отдельно блюдо меню и ланч? У нас же только список с едой


Marat [1 day ago]
Поэтому советуюсь здесь с вами, чтобы понять правильно ли я понимаю или нет, как лучше


Nikita Ganin [Oct 29th at 2:27 PM]
В задании есть условие "меню меняется каждый день", т.е. если в новые сутки админ не вввел никакие данные, то собственно и голосовать не за что? Как кто понимает это?


15 replies
Taras [1 day ago]
Я понимаю так, что все данные о меню и голосовании «обнуляются» каждый день, то есть по мере наполнения базы информацией о меню в ресторанах появляется возможность за эти рестораны голосовать. Вчера было меню, а сегодня может и не быть.


Sergey Zhukov [1 day ago]
не обнуляется, голосовать за блюдо в ресторане можно не чаще раза в сутки


Taras [1 day ago]
Речь об этом: каждый день начинается с чистого листа. Ты голосуешь за один день, а в следующем новые данные по ресторанам и меню.


Ilya A. Kvyatkovsky [1 day ago]
Сегодня *29.10.2018*: *Юзер* заходит в апп -> Видит _список ресторанов у которых *есть ланч-меню на сегодня*_ -> Открывает меню ресторана ххх -> Видит *список еды* этого *ресторана* на *сегодня* -> Голосует или нет. (Если у ресторана нет ланч-меню на сегодня, то юзер не увидит этот ресторан в списке и не сможет проголосовать) По рекомендациям, представил весь процесс с точки зрения Админа и Юзера, все возможные действия расписал схематично. Проект получается аналогичный тому, что мы делаем с Григорием. У меня получается 5 таблиц (USERS, ROLES, RESTAURANTS, MENU, VOTES). Не нашел вариант как запаковать поплотнее. (edited)


Marat [1 day ago]
А в таблице MENU как блюда делить? Не нужно разве отдельную таблицу с блюдами?


Marat [1 day ago]
В MENU будет id ресторана к каждому блюду?


Marat [1 day ago]
Я думал что меню статично и Админ его редактирует. Пока не поменяет - ничего не измениться
Menu changes each day (admins do the updates) (edited)


Ilya A. Kvyatkovsky [1 day ago]
В таблице MENU вся еда всех ресторанов. date_time/restaurant_id/dish_name/dish_price
Вот только не могу понять нужно ли поле ID для этой таблицы.
Рекомендация № 13 - нужно хранить историю еды. (edited)


Marat [1 day ago]
А в VOTES будешь хранить id юзера, ресторана и меню?

Ilya A. Kvyatkovsky [1 day ago]
дата_время голосования/user_id/restaurant_id
голос как я понимаю отдается ресторану за его меню (edited)


Marat [1 day ago]
Ну как я понял это не голосование, а бронирование своего обеда на сегодня. Или не так?


Ilya A. Kvyatkovsky [1 day ago]
Да, очень похоже, с небольшими оговорками по структуре и функционалу.

Ilya A. Kvyatkovsky [1 day ago]
Это субъективно мои предположения и я бы не рекомендовал следовать им, т.к. мой опыт СУБД ограничен исключительно школьной программой 10-ти летней давности.


pro [21 hours ago]
@Ilya A. Kvyatkovsky десять лет назад в школе преподавали управление базами?.. Где эта школа, я хочу на нее посмотреть, (сквозь слезы) хотя бы через гугл мап


Ilya A. Kvyatkovsky [20 hours ago]
@pro не понимаю что тут удивительного, школы все разные и преподаватели в них тоже разные, а на дополнительных занятиях рассказывают немного больше чем обычно.


Zhinko [Yesterday at 4:21 PM]
Давайте подумаем как лучше сделать БД. Вот что у меня получилось. Жду предложений.
PUBLIC.png



24 replies
Marat [22 hours ago]
Почему ID ресторана находится в еде?



[22 hours ago]
я в таблицу ресторана добавил поле "дата обновления", чтоб потом использовать его в выдаче списка ресторанов с обновленным меню именно нужного дня. Остальное сделал через таблицы меню и еда. К security и голосам пока не подходил, играюсь пока с выводом нормального jsona


[22 hours ago]
@Marat видимо потому, что потом будет использовать ManyToOne аннотацию


Marat [22 hours ago]
Не наоборот должно быть? В ресторане еда


Zhinko [22 hours ago]
Тогда у тебя будут строки в ресторане повторяться так как ресторан один а еды много


Chensy [22 hours ago]
У меня почти также, только вот зачем в USERS поле VOTED ?


Zhinko [22 hours ago]
Типо поле проголосовал юзер или нет


Chensy [22 hours ago]
Зачем? ты это поле что постоянно менять будешь? эта инфа же есть в таблице VOTES


Zhinko [22 hours ago]
А как тогда сделать так , чтобы юзер мог голосовать только один раз , а не сколько хочешь раз?


Chensy [21 hours ago]
Ограничение DATE+USER_ID в таблице VOTES как вариант



Zhinko [21 hours ago]
В принципе да, ты права, я об этом не подумал)


[19 hours ago]
Когда пытаешься достать ресторан посредством JPA, ругается на то, что отсутствует передаточная таблица ресторан_меню. Как можно вытащить меню из ресторана без этой таблицы?


[18 hours ago]
Почему в JPA есть дофига Query методов для таблицы, но ниодной для обьединения таблиц (JOIN)


Sergey [18 hours ago]
схема на рис. верная, проверяй как ты достаешь ресторан )


Sergey [18 hours ago]
Есть join, вот пример:  https://stackoverflow.com/questions/5478328/jpa-jointable-annotation
Stack Overflow
JPA "@JoinTable" annotation
In which case do you use JPA @JoinTable annotation?
 


[18 hours ago]
та это понятно, я имел в виду что то типа метода findAllRestaurantJoinMenu()


[18 hours ago]
но да, получается я туплю. Когда я достаю ресторан методом findById(Long id) , то с рестораном подтягивается еда. А если findAll(), то нет. какая то мистика, где то закралась ошибка


Sergey [18 hours ago]
Вытаскивать все из 2х таблиц и еще и join-ить очень накладно. Вот hibernate тебя и не слушает ))

[18 hours ago]
ща удалил связующую таблицу ресторан_меню и он отказывается доставать.

[18 hours ago]
111111.jpg



[18 hours ago]
с таблицей связи все ок, даже без всяких @JoinTable


[18 hours ago]
а если хранить отдельно ресторан, отдельно еду, и отдельно сушность еда ресторана?


[18 hours ago]
также отдельно юзером и таблицу за какой ресторан проголосовали юзеры

Marat [4 hours ago]
А у юзера не должно быть email ? Как он будет регистрироваться?


Grigory Kislin [Oct 31st at 9:49 PM]
опрос- не кто не против выкладывания тут готовых решений? не мешает разрабатывать самостоятельно?
 


13 replies
Dima [1 day ago]
ну если не обсуждать свои решения, то смысл вообще в канале) не против


Gekov Iliya [1 day ago]
Мне кажется это лишним, как то чистота эксперимента по проверке своих способностей теряется. Можно обсудить после 09.01 кто как сделал. С другой стороны можно просто отписаться от канала, если нет желания смотреть чужие решения


[1 day ago]
с толку сбивают чужие мысли ) я стараюсь не вникать, буду использовать как "прогресс-бар", чтобы не отставать  :relaxed:
надо было правила что ли придумать заранее, - типа "только вопросы к администрации по пунктам задания, реализация - только в личку"


Gekov Iliya [1 day ago]
Согласен


[1 day ago]
чо пальцы ставим кто  против решений - :-1:


Dima [1 day ago]
:call_me_hand:


Dima [1 day ago]
это типо пофиг)
 


Ilya A. Kvyatkovsky [1 day ago]
Выкладывать готовые решения, безусловно бесполезно для всех кто хочет действительно научиться самостоятельно разрабатывать подобные проекты, а вот если ты в тупике или не знаешь какое решение принять, то думаю, что если ребята накидают своих мыслей, то это реально поможет сдвинуться с мертвой точки. (по себе знаю)). Ну а дальше каждый сам решает какая степень знаний ему нужно, все делать с чужой помощью или полностью самостоятельно. Я бы не прочь получить еще штучек 5 подобных ТЗ, что бы отточить навыки.)  (хотя у самого проект пока процентах на 5-10 :stuck_out_tongue_winking_eye:)


Marat [1 day ago]
Смысл запрещать нет, так как на работе все равно консультируешься с колегами как все-таки правильно сделать. Тот же Слак, только живой


Nikita Ganin [1 day ago]
Одно дело когда ты сам задаешь вопрос, а другое когда просматривает чужие решения. Может просто не стоит выкладывать свое решение, чтобы его оценили. (edited)



YuriyUh [1 day ago]
Максимум вопрос и ответ где почитать, все остальное действительно сбивает с толку.



Andrey Tolkachev [1 day ago]
я согласен с @Ilya A. Kvyatkovsky, не вижу никаких проблем в выкладывании своего решения. Здесь ведь никого из под палки не заставляют учиться и делать проект) Если человек хочет сделать сам, то он и не будет смотреть, или просто отпишется на время. Ну а если есть затык в каком-то месте, то общая группа в этом плане может сильно помочь. Имхо, каждый сам решает, работает он над собой, или просто занимается копипастом :slightly_smiling_face:


Andrew Kalugin [1 day ago]
Я не против. Если ты хочешь сделать все сам, то просто не читай. Если решил все скопировать, то смысл вообще тут учиться? @Andrey Tolkachev согласен, иногда нужен совет, что бы сдвинутся с мертвой точки, а группа может помочь.


Yesterday at 7:44 AM]
имеет ли значение какую СУБД выбирать для проектов в портфолио, чтобы удобно было смотреть работу приложения? наверное, лучше локальную вроде hsqldb? вы делали на hsqldb или на postgers?


1 reply
Gekov Iliya [1 day ago]
В подсказках про это сказано


Grigory Kislin [10:09 AM]
@here
*Коллеги- по опросу - свои решения  НЕ выкладываем. Когда мне задают вопрос- я стараюсь дать полезные ссылки или совет, но чтобы человек дошел до ответа самостоятельно. Учимся думать. Отписаться от канала - не вариант, тк здесь все таки оказываем такого рода поддержку. Можно сделать собственный канал или чат (права есть) и делится решениями там, для тех, кто не против.* (edited)


Marat [Yesterday at 5:44 PM]
Все таки лучше делать глобальный сиквенс или для каждого энтити свой?


2 replies
Marat [23 hours ago]
Вроде бы когда пишут на процедурах в базе данных, то делают для каждого свой сиквенс.
А когда пишут в Java приложении, то как обычно делают? Один глобальный или нет?


Grigory Kislin [5 hours ago]
скорее тут нет как обычно. и как лучше. вроде в занятии была ссылка на + и - (edited)


Raisa [Today at 7:55 AM]
а если в restaurants сделать строку с блюдами и перечислять их через ;, к примеру. Когда они будут нужны просто выделять нужные подстроки. Т.е. не делать отдельную таблицу с едой. Нам ведь нужны только название и цена.


18 replies
Dima [10 hours ago]
Почитай про так называемые нормальные формы таблиц. Перечислять как ты говоришь bad practice, очень бэээд)) доставать из таблицы инфу очень муторно. И если хратить информацию по голосованиям,то возможно придется хранить инфу по еде.А ее тысячи (edited)



Gekov Iliya [9 hours ago]
А еще по тз нужно хранить историю всех ланчей


Raisa [9 hours ago]
я читала и насколько поняла, суть нормализации как раз в том, чтобы предотвратить избыточность данных )  разве 2-5 блюд в день сильно муторно выводить? голосование же не за еду, а за ресторан? еда ведь нужна только для того, чтобы понять интересен ресторан или нет?


Gekov Iliya [9 hours ago]
IMG_20181106_090323.jpg



Dima [9 hours ago]
Ну вот ошиблась ты в цене на еду,она у тебя записывается в строчку,одна за одной,чтоб поменять тебе надо достать всю еду ресторана,потом в ней найти нужную еду,короче это гемор


Gekov Iliya [9 hours ago]
Как хранить в таком случае историю еды? В виде бесконечного стринга? А как разделять название еды и его стоимость? Если это делать через строчку, то тот кто будет писать фронт не сможет сформатировать вывод, он будет вынужден нарисовать фронт так как заложено у вас, а не так как хочет к примеру заказчик (edited)


Sergey Zhukov [9 hours ago]
Закладывай сразу возможность вытаскивать отдельно еду каждого ресторана с помощью запроса к базе. Если это парсинг ячейки - уже должно насторожить


Raisa [9 hours ago]
@Dima если админу нужна возможность доставать по частям - цену, название и т.д, то да, нужна отдельная таблица


Gekov Iliya [9 hours ago]
Это не говоря уже о том, чтобы предусмотреть возможность расширения, к примеру добавления фото еды, состава и т.п.


Raisa [9 hours ago]
@Gekov Iliya говорили не додумывать ) не всегда пока понятно, что является додумыванием, а что нет :woman-shrugging:


Raisa [9 hours ago]
насчет хранения истории еды я не совсем поняла, что имеется ввиду - хранить именно блюда из ресторана или рестораны, где обедали? я склоняюсь к тому, что рестораны. возможно, ошибаюсь


Dima [9 hours ago]
Конечно надо ему доставать) онбудет у себя в javascript писать расположение цены,еды как обьекты. Точно так же как мы в jsp писали



Gekov Iliya [9 hours ago]
На вырезке что я скинул как раз об этом и говорится, что есть базовые вещи а есть неочевидные додумки, рассмотреть разные возможности обращения к данным и расширяемость этих данных - это базовая архитектура


Raisa [9 hours ago]
ок, спасибо! что-то проясняется (edited)


Gekov Iliya [9 hours ago]
Но это в любом случае только наше имхо)


Raisa [6 hours ago]
я поняла: история еды - это дата + выбранный ресторан + еда в данном ресторане в этот день. Так? Список ресторанов статичен, если админ его не меняет, а еда во всех ресторанах каждый день обновляется


Gekov Iliya [6 hours ago]
Да, мне кажется именно так


Grigory Kislin [5 hours ago]
реляционные базы данных- достаточно стандартизированная вещь. И там хранить списками- бывает, но совсем не часто и для особых случаев. В данном случае еда- это конечно же отдельная таблица. Она будет обрастать со временем картинками, описанием и пр..